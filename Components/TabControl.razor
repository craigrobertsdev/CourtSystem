<div class="tab-row">
    @foreach (var tabPage in TabPages) {
        <button type="button"
                class="tab-button @GetButtonClass(tabPage)"
                @onclick="() => ActivateTab(tabPage)">
            @tabPage.Title
        </button>
    }
</div>

<CascadingValue Value="this">
    @ChildContent
</CascadingValue>

@code {
    [Parameter] 
    public RenderFragment? ChildContent { get; set; }

    public TabPage ActiveTab;
    List<TabPage> TabPages = new List<TabPage>();


    internal void AddPage(TabPage tabPage) {
        TabPages.Add(tabPage);
        if (TabPages.Count == 1) {
            ActiveTab = tabPage;
        }
        StateHasChanged();
    }

    private void ActivateTab(TabPage tabPage) {
        ActiveTab = tabPage;
    }

    private string GetButtonClass(TabPage tabPage) {
        if (ActiveTab == tabPage) {
            return "btn-primary";
        }

        return "btn-secondary";
    }

}